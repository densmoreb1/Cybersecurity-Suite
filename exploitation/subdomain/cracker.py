from queue import Queue
import PySimpleGUI as sg
import requests 
import sys 
import threading

def cracker(wordlist, ip):

    # ip = input("ip: ")
    # wordlist = input("path: ")
    try:
        sub_list = open(wordlist).read()
    except:
        print('invalid path')
        sys.exit()

    subdoms = sub_list.splitlines()

    q = Queue()
    threads = 50

    def request(q):
        while True:
            word = q.get()

            try:
                response = requests.get(f"http://{ip}/{word}")
            except:
                pass
            else:
                if response.status_code != 404:
                    print(f"{response.status_code} {word}")
            
            q.task_done()

    print('----------Starting enumeration----------')

    for i in range(threads):
        worker = threading.Thread(target=request, args=(q,))
        worker.start()

    for dom in range(len(subdoms)):
        q.put(subdoms[dom])
    
